<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mathias Heinz">
<meta name="dcterms.date" content="2024-04-08">

<title>Final Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project</h1>
  <div class="quarto-categories">
    <div class="quarto-category">code</div>
    <div class="quarto-category">analysis</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mathias Heinz </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 8, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.0     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>wine_ratings <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-05-28/winemag-data-130k-v2.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 129971 Columns: 14
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(11): country, description, designation, province, region_1, region_2, t... dbl
(3): ...1, points, price
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `` -&gt; `...1`</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>country_sel <span class="ot">&lt;-</span> wine_ratings <span class="sc">|&gt;</span> <span class="fu">distinct</span>(country) <span class="sc">|&gt;</span> <span class="fu">pull</span>(country)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>wine_ratings <span class="sc">|&gt;</span> <span class="fu">distinct</span>(variety) <span class="sc">|&gt;</span> <span class="fu">pull</span>(variety)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "White Blend"                        
  [2] "Portuguese Red"                     
  [3] "Pinot Gris"                         
  [4] "Riesling"                           
  [5] "Pinot Noir"                         
  [6] "Tempranillo-Merlot"                 
  [7] "Frappato"                           
  [8] "Gewürztraminer"                     
  [9] "Cabernet Sauvignon"                 
 [10] "Nerello Mascalese"                  
 [11] "Chardonnay"                         
 [12] "Malbec"                             
 [13] "Tempranillo Blend"                  
 [14] "Meritage"                           
 [15] "Red Blend"                          
 [16] "Merlot"                             
 [17] "Nero d'Avola"                       
 [18] "Chenin Blanc"                       
 [19] "Gamay"                              
 [20] "Sauvignon Blanc"                    
 [21] "Viognier-Chardonnay"                
 [22] "Primitivo"                          
 [23] "Catarratto"                         
 [24] "Inzolia"                            
 [25] "Petit Verdot"                       
 [26] "Monica"                             
 [27] "Bordeaux-style White Blend"         
 [28] "Grillo"                             
 [29] "Sangiovese"                         
 [30] "Cabernet Franc"                     
 [31] "Champagne Blend"                    
 [32] "Bordeaux-style Red Blend"           
 [33] "Aglianico"                          
 [34] "Petite Sirah"                       
 [35] "Touriga Nacional"                   
 [36] "Carmenère"                          
 [37] "Albariño"                           
 [38] "Petit Manseng"                      
 [39] "Rosé"                               
 [40] "Zinfandel"                          
 [41] "Vernaccia"                          
 [42] "Rosato"                             
 [43] "Grüner Veltliner"                   
 [44] "Viognier"                           
 [45] "Vermentino"                         
 [46] "Grenache Blanc"                     
 [47] "Syrah"                              
 [48] "Nebbiolo"                           
 [49] "Shiraz-Cabernet Sauvignon"          
 [50] "Pinot Blanc"                        
 [51] "Alsace white blend"                 
 [52] "Barbera"                            
 [53] "Rhône-style Red Blend"              
 [54] "Portuguese White"                   
 [55] "Graciano"                           
 [56] "Tannat-Cabernet"                    
 [57] "Sauvignon"                          
 [58] "Sangiovese Grosso"                  
 [59] "Torrontés"                          
 [60] "Prugnolo Gentile"                   
 [61] "G-S-M"                              
 [62] "Verdejo"                            
 [63] "Fumé Blanc"                         
 [64] "Furmint"                            
 [65] "Pinot Bianco"                       
 [66] "Bonarda"                            
 [67] "Shiraz"                             
 [68] "Montepulciano"                      
 [69] "Moscato"                            
 [70] "Grenache"                           
 [71] "Ugni Blanc-Colombard"               
 [72] "Syrah-Viognier"                     
 [73] "Blaufränkisch"                      
 [74] "Friulano"                           
 [75] "Assyrtico"                          
 [76] "Carignan-Grenache"                  
 [77] "Sagrantino"                         
 [78] "Savagnin"                           
 [79] "Cabernet Sauvignon-Syrah"           
 [80] "Prosecco"                           
 [81] "Vignoles"                           
 [82] "Sparkling Blend"                    
 [83] "Muscat"                             
 [84] "Muscadelle"                         
 [85] "Shiraz-Viognier"                    
 [86] "Garganega"                          
 [87] "Pinot Grigio"                       
 [88] "Tempranillo"                        
 [89] "Zierfandler"                        
 [90] "Cortese"                            
 [91] "Mencía"                             
 [92] "Zweigelt"                           
 [93] "Melon"                              
 [94] "Rhône-style White Blend"            
 [95] "Vidal"                              
 [96] "Cannonau"                           
 [97] "Verdelho"                           
 [98] "Marsanne"                           
 [99] "Scheurebe"                          
[100] "Kerner"                             
[101] "Syrah-Grenache"                     
[102] "Dolcetto"                           
[103] "Vilana"                             
[104] "Glera"                              
[105] "Viura"                              
[106] "Garnacha Tintorera"                 
[107] "Pinot Nero"                         
[108] "Roter Veltliner"                    
[109] "Pinotage"                           
[110] "Sémillon"                           
[111] "Pinot Noir-Gamay"                   
[112] "Antão Vaz"                          
[113] "Cabernet Sauvignon-Carmenère"       
[114] "Verdejo-Viura"                      
[115] "Verduzzo"                           
[116] "Verdicchio"                         
[117] "Silvaner"                           
[118] "Colombard"                          
[119] "Carricante"                         
[120] "Sylvaner"                           
[121] "Fiano"                              
[122] "Früburgunder"                       
[123] "Sousão"                             
[124] "Roussanne"                          
[125] "Avesso"                             
[126] "Cinsault"                           
[127] "Chinuri"                            
[128] "Tinta Miúda"                        
[129] "Muscat Blanc à Petits Grains"       
[130] "Portuguese Sparkling"               
[131] "Monastrell"                         
[132] "Xarel-lo"                           
[133] "Greco"                              
[134] "Trebbiano"                          
[135] "Corvina, Rondinella, Molinara"      
[136] "Port"                               
[137] "Chenin Blanc-Chardonnay"            
[138] "Insolia"                            
[139] "Merlot-Malbec"                      
[140] "Ribolla Gialla"                     
[141] "Cabernet Sauvignon-Merlot"          
[142] "Duras"                              
[143] "Weissburgunder"                     
[144] "Roditis"                            
[145] "Traminer"                           
[146] "Papaskarasi"                        
[147] "Tannat-Syrah"                       
[148] "Marsanne-Roussanne"                 
[149] "Charbono"                           
[150] "Merlot-Argaman"                     
[151] "Prié Blanc"                         
[152] "Sherry"                             
[153] "Provence red blend"                 
[154] "Tannat"                             
[155] "Zibibbo"                            
[156] "Falanghina"                         
[157] "Garnacha"                           
[158] "Negroamaro"                         
[159] "Mourvèdre"                          
[160] "Syrah-Cabernet"                     
[161] "Müller-Thurgau"                     
[162] "Pinot Meunier"                      
[163] "Cabernet Sauvignon-Sangiovese"      
[164] "Austrian Red Blend"                 
[165] "Teroldego"                          
[166] "Pansa Blanca"                       
[167] "Muskat Ottonel"                     
[168] "Sauvignon Blanc-Semillon"           
[169] "Claret"                             
[170] "Semillon-Sauvignon Blanc"           
[171] "Bical"                              
[172] "Moscatel"                           
[173] "Rosado"                             
[174] "Viura-Chardonnay"                   
[175] "Baga"                               
[176] "Malvasia Bianca"                    
[177] "Gelber Muskateller"                 
[178] "Malbec-Merlot"                      
[179] "Monastrell-Syrah"                   
[180] "Malbec-Tannat"                      
[181] "Malbec-Cabernet Franc"              
[182] "Turbiana"                           
[183] "Refosco"                            
[184] "Alvarinho"                          
[185] "Manzoni"                            
[186] "Aragonês"                           
[187] "Agiorgitiko"                        
[188] "Malagousia"                         
[189] "Assyrtiko"                          
[190] "Ruché"                              
[191] "Welschriesling"                     
[192] "Tinta de Toro"                      
[193] "Cabernet Moravia"                   
[194] "Rieslaner"                          
[195] "Traminette"                         
[196] "Chambourcin"                        
[197] "Nero di Troia"                      
[198] "Lambrusco di Sorbara"               
[199] "Cesanese"                           
[200] "Feteasca Neagra"                    
[201] "Lagrein"                            
[202] "Tinta Fina"                         
[203] "St. Laurent"                        
[204] "Marsanne-Viognier"                  
[205] "Cabernet Sauvignon-Shiraz"          
[206] "Syrah-Cabernet Sauvignon"           
[207] "Gewürztraminer-Riesling"            
[208] "Pugnitello"                         
[209] "Cerceal"                            
[210] "Touriga Nacional Blend"             
[211] "Austrian white blend"               
[212] "Tocai"                              
[213] "Tinta Roriz"                        
[214] "Chardonnay-Viognier"                
[215] "Fernão Pires"                       
[216] "Cabernet Franc-Cabernet Sauvignon"  
[217] "Grenache-Syrah"                     
[218] "Seyval Blanc"                       
[219] "Muscat Canelli"                     
[220] "Cabernet Merlot"                    
[221] "Tempranillo-Cabernet Sauvignon"     
[222] "Arinto"                             
[223] "Aragonez"                           
[224] "Merlot-Cabernet Franc"              
[225] "Syrah-Petite Sirah"                 
[226] "Cabernet Blend"                     
[227] "Maturana"                           
[228] "Pecorino"                           
[229] "Rotgipfler"                         
[230] "Kinali Yapincak"                    
[231] "Cabernet Franc-Carmenère"           
[232] "Magliocco"                          
[233] "Gamay Noir"                         
[234] "Sauvignon Gris"                     
[235] "Spätburgunder"                      
[236] "Picpoul"                            
[237] "Vidal Blanc"                        
[238] "Albanello"                          
[239] "White Port"                         
[240] "Arneis"                             
[241] "Malvasia"                           
[242] "Plavac Mali"                        
[243] "Lemberger"                          
[244] "Saperavi"                           
[245] "Altesse"                            
[246] "Blanc du Bois"                      
[247] "Provence white blend"               
[248] "Nosiola"                            
[249] "Dornfelder"                         
[250] "Roussanne-Viognier"                 
[251] "Ojaleshi"                           
[252] "Godello"                            
[253] "Mondeuse"                           
[254] "Perricone"                          
[255] "Pedro Ximénez"                      
[256] "Auxerrois"                          
[257] "Syrah-Merlot"                       
[258] "Albana"                             
[259] "Muskat"                             
[260] "Lambrusco"                          
[261] "Cabernet Sauvignon-Malbec"          
[262] "Tinto Fino"                         
[263] "Malbec-Cabernet Sauvignon"          
[264] "Moschofilero"                       
[265] "Grechetto"                          
[266] "Encruzado"                          
[267] "Carignano"                          
[268] "Cabernet Franc-Merlot"              
[269] "Torbato"                            
[270] "Syrah-Petit Verdot"                 
[271] "Garnacha Blanca"                    
[272] "Pallagrello"                        
[273] "Morava"                             
[274] "Syrah-Mourvèdre"                    
[275] "Aleatico"                           
[276] "Carcajolu"                          
[277] "Kisi"                               
[278] "Shiraz-Grenache"                    
[279] "Palomino"                           
[280] "Grenache-Carignan"                  
[281] "Nascetta"                           
[282] "Siria"                              
[283] "Malbec-Syrah"                       
[284] "Asprinio"                           
[285] "Feteascǎ Regalǎ"                    
[286] "Lambrusco Grasparossa"              
[287] "Marselan"                           
[288] "Tocai Friulano"                     
[289] "Schiava"                            
[290] "Alfrocheiro"                        
[291] "Chardonnay-Semillon"                
[292] "Corvina"                            
[293] "Norton"                             
[294] "Alicante Bouschet"                  
[295] "Tokaji"                             
[296] "Moscadello"                         
[297] "Cabernet Sauvignon-Tempranillo"     
[298] "Carignan"                           
[299] "Loureiro-Arinto"                    
[300] "Cabernet-Syrah"                     
[301] "Sauvignon Blanc-Chardonnay"         
[302] "Symphony"                           
[303] "Edelzwicker"                        
[304] "Madeira Blend"                      
[305] "Black Muscat"                       
[306] "Grenache Noir"                      
[307] "Durella"                            
[308] "Xinomavro"                          
[309] "Tinto del Pais"                     
[310] "Merlot-Cabernet Sauvignon"          
[311] "Cercial"                            
[312] "Johannisberg Riesling"              
[313] "Petite Verdot"                      
[314] "Passerina"                          
[315] "Valdiguié"                          
[316] "Colombard-Sauvignon Blanc"          
[317] "Kangoun"                            
[318] "Loureiro"                           
[319] "Posip"                              
[320] "Uva di Troia"                       
[321] "Gros and Petit Manseng"             
[322] "Jacquère"                           
[323] "Kalecik Karasi"                     
[324] "Karasakiz"                          
[325] "Mourvèdre-Syrah"                    
[326] "Negrette"                           
[327] "Zierfandler-Rotgipfler"             
[328] "Clairette"                          
[329] "Raboso"                             
[330] "País"                               
[331] "Mauzac"                             
[332] "Pinot Auxerrois"                    
[333] "Chenin Blanc-Sauvignon Blanc"       
[334] "Diamond"                            
[335] "Marzemino"                          
[336] "Tinta Barroca"                      
[337] "Chardonnay-Sauvignon Blanc"         
[338] "Castelão"                           
[339] "Trebbiano Spoletino"                
[340] "Teran"                              
[341] "Trepat"                             
[342] "Freisa"                             
[343] "Neuburger"                          
[344] "Sämling"                            
[345] "Chasselas"                          
[346] "Hárslevelü"                         
[347] "Trincadeira"                        
[348] "Merlot-Tannat"                      
[349] "Rkatsiteli"                         
[350] "Melnik"                             
[351] "Siegerrebe"                         
[352] "Trousseau Gris"                     
[353] "Grenache Blend"                     
[354] "Gros Manseng"                       
[355] "Portuguese Rosé"                    
[356] "Brachetto"                          
[357] "Mantonico"                          
[358] "Ekigaïna"                           
[359] "Muskateller"                        
[360] "Aligoté"                            
[361] "Sangiovese Cabernet"                
[362] "Touriga Nacional-Cabernet Sauvignon"
[363] "Muscat Blanc"                       
[364] "Argaman"                            
[365] "Viognier-Roussanne"                 
[366] "Pallagrello Bianco"                 
[367] "Bobal"                              
[368] "Malvasia Istriana"                  
[369] "Cabernet Sauvignon-Cabernet Franc"  
[370] "Baco Noir"                          
[371] "Veltliner"                          
[372] "Tempranillo-Tannat"                 
[373] "Morillon"                           
[374] "Touriga Franca"                     
[375] "Picolit"                            
[376] "Barbera-Nebbiolo"                   
[377] "Prieto Picudo"                      
[378] "Gaglioppo"                          
[379] "Tokay"                              
[380] "Sacy"                               
[381] "Piedirosso"                         
[382] "Piquepoul Blanc"                    
[383] "Mansois"                            
[384] "Chardonnay-Sauvignon"               
[385] "Tempranillo-Garnacha"               
[386] "Carmenère-Cabernet Sauvignon"       
[387] "Chenin Blanc-Viognier"              
[388] "Susumaniello"                       
[389] "Vitovska"                           
[390] "Orange Muscat"                      
[391] "Grauburgunder"                      
[392] "Carignane"                          
[393] "Moscatel Roxo"                      
[394] "Tannat-Merlot"                      
[395] "Nerello Cappuccio"                  
[396] "Counoise"                           
[397] "Macabeo"                            
[398] "Mazuelo"                            
[399] "Sauvignon-Sémillon"                 
[400] "Tinta del Pais"                     
[401] "Vranec"                             
[402] "Mavrud"                             
[403] "Cesanese d'Affile"                  
[404] "Moscato Giallo"                     
[405] "Debit"                              
[406] "Verdil"                             
[407] "Cabernet"                           
[408] "Verduzzo Friulano"                  
[409] "Treixadura"                         
[410] "Loin de l'Oeil"                     
[411] "Coda di Volpe"                      
[412] "Grenache-Mourvèdre"                 
[413] "Forcallà"                           
[414] "Viura-Verdejo"                      
[415] "Bombino Bianco"                     
[416] "Pinot-Chardonnay"                   
[417] "Syrah-Tempranillo"                  
[418] "Cabernet Sauvignon-Barbera"         
[419] "Merlot-Cabernet"                    
[420] "Muscat d'Alexandrie"                
[421] "Jaen"                               
[422] "Tinta del Toro"                     
[423] "Timorasso"                          
[424] "Pigato"                             
[425] "Sangiovese-Cabernet Sauvignon"      
[426] "Shiraz-Cabernet"                    
[427] "Viognier-Gewürztraminer"            
[428] "Prunelard"                          
[429] "Sauvignon Blanc-Chenin Blanc"       
[430] "Gros Plant"                         
[431] "Malbec-Petit Verdot"                
[432] "Colombard-Ugni Blanc"               
[433] "Grignolino"                         
[434] "Garnacha-Syrah"                     
[435] "Rufete"                             
[436] "Tempranillo-Shiraz"                 
[437] "Mtsvane"                            
[438] "Chardonnay-Pinot Gris"              
[439] "Marawi"                             
[440] "Chardonnay-Pinot Blanc"             
[441] "Mataro"                             
[442] "Tinta Cao"                          
[443] "Blauer Portugieser"                 
[444] "Ugni Blanc"                         
[445] "Groppello"                          
[446] "Semillon-Chardonnay"                
[447] "Irsai Oliver"                       
[448] "Alvarelhão"                         
[449] "Poulsard"                           
[450] "Grenache-Shiraz"                    
[451] "Baga-Touriga Nacional"              
[452] "Carineña"                           
[453] "Pignoletto"                         
[454] "Muscatel"                           
[455] "Mavrodaphne"                        
[456] "Ciliegiolo"                         
[457] "Viognier-Grenache Blanc"            
[458] "Greco Bianco"                       
[459] "Cabernet Sauvignon-Merlot-Shiraz"   
[460] "Sciaccerellu"                       
[461] "Zelen"                              
[462] "Alicante"                           
[463] "Emir"                               
[464] "Rosenmuskateller"                   
[465] "Tsolikouri"                         
[466] "Narince"                            
[467] "Malbec-Cabernet"                    
[468] "Touriga"                            
[469] "Grecanico"                          
[470] "Carmenère-Syrah"                    
[471] "Madeleine Angevine"                 
[472] "Mavroudi"                           
[473] "Pinot Blanc-Pinot Noir"             
[474] "Muscat Hamburg"                     
[475] "Tempranillo Blanco"                 
[476] "Casavecchia"                        
[477] "Pinot Gris-Gewürztraminer"          
[478] "White Riesling"                     
[479] "Tinto Velasco"                      
[480] "Hondarrabi Zuri"                    
[481] "Nuragus"                            
[482] "Xynisteri"                          
[483] "Kadarka"                            
[484] "Sauvignon Musqué"                   
[485] "Roussanne-Marsanne"                 
[486] "Incrocio Manzoni"                   
[487] "Terrantez"                          
[488] "Bual"                               
[489] "Okuzgozu"                           
[490] "Rivaner"                            
[491] "Doña Blanca"                        
[492] "Graševina"                          
[493] "Lambrusco Salamino"                 
[494] "Sangiovese-Syrah"                   
[495] "Tannat-Cabernet Franc"              
[496] "Thrapsathiri"                       
[497] "Fer Servadou"                       
[498] "Mission"                            
[499] "Kekfrankos"                         
[500] "Cococciola"                         
[501] "Blauburgunder"                      
[502] "Marquette"                          
[503] "Romorantin"                         
[504] "Verdejo-Sauvignon Blanc"            
[505] "Braucol"                            
[506] "Malvasia-Viura"                     
[507] "Savatiano"                          
[508] "Cabernet Franc-Malbec"              
[509] "Pallagrello Nero"                   
[510] "Rebula"                             
[511] "Vespolina"                          
[512] "Shiraz-Malbec"                      
[513] "Rebo"                               
[514] "Macabeo-Chardonnay"                 
[515] "Tempranillo-Malbec"                 
[516] "Tamjanika"                          
[517] "Trousseau"                          
[518] "Bacchus"                            
[519] "Syrah-Malbec"                       
[520] "Syrah-Cabernet Franc"               
[521] "Macabeo-Moscatel"                   
[522] "Cariñena-Garnacha"                  
[523] "Plyto"                              
[524] "Códega do Larinho"                  
[525] "Sideritis"                          
[526] "Çalkarası"                          
[527] "Azal"                               
[528] "Moscatel Graúdo"                    
[529] "Viosinho"                           
[530] "Moschofilero-Chardonnay"            
[531] "Paralleda"                          
[532] "Rara Neagra"                        
[533] "Malvasia di Candia"                 
[534] "Maria Gomes"                        
[535] "Molinara"                           
[536] "Malvar"                             
[537] "Airen"                              
[538] "Erbaluce"                           
[539] "Muscat of Alexandria"               
[540] "Verdosilla"                         
[541] "Abouriou"                           
[542] "Pinot Noir-Syrah"                   
[543] "Nielluciu"                          
[544] "Malbec-Bonarda"                     
[545] "Vespaiolo"                          
[546] "Malbec-Carménère"                   
[547] "Biancolella"                        
[548] "Sauvignon Blanc-Verdejo"            
[549] "Aidani"                             
[550] "Garnacha-Monastrell"                
[551] "Vinhão"                             
[552] "Souzao"                             
[553] "Roter Traminer"                     
[554] "Moscatel de Alejandría"             
[555] "Rolle"                              
[556] "Tinta Francisca"                    
[557] "Malvasia Nera"                      
[558] "Orangetraube"                       
[559] "Riesling-Chardonnay"                
[560] "Žilavka"                            
[561] "Portuguiser"                        
[562] "Listán Negro"                       
[563] "Pinotage-Merlot"                    
[564] "Muscadine"                          
[565] "Maria Gomes-Bical"                  
[566] "Grolleau"                           
[567] "Zlahtina"                           
[568] "Syrah-Grenache-Viognier"            
[569] "Jacquez"                            
[570] "Gouveio"                            
[571] "Canaiolo"                           
[572] "Carignan-Syrah"                     
[573] "Bombino Nero"                       
[574] "Chardonnay-Riesling"                
[575] "Malagouzia-Chardonnay"              
[576] "Mavrotragano"                       
[577] "Bovale"                             
[578] "Frankovka"                          
[579] "Shiraz-Roussanne"                   
[580] "Cabernet-Shiraz"                    
[581] "Syrah-Carignan"                     
[582] "Elbling"                            
[583] "Gragnano"                           
[584] "Garnacha Blend"                     
[585] "Pinot Blanc-Chardonnay"             
[586] "Schwartzriesling"                   
[587] "Petit Meslier"                      
[588] "Bastardo"                           
[589] "Vidadillo"                          
[590] "Misket"                             
[591] "Chardonnay Weissburgunder"          
[592] "Other"                              
[593] "Robola"                             
[594] "Merlot-Shiraz"                      
[595] "Malagouzia"                         
[596] "Folle Blanche"                      
[597] "Malbec Blend"                       
[598] "Merlot-Syrah"                       
[599] "Tamianka"                           
[600] "Cabernet Pfeffer"                   
[601] "Morio Muskat"                       
[602] "Rabigato"                           
[603] "Babić"                              
[604] "Roviello"                           
[605] "Yapincak"                           
[606] "Sauvignonasse"                      
[607] "Viognier-Marsanne"                  
[608] "Mandilaria"                         
[609] "Meseguera"                          
[610] "Alvarinho-Chardonnay"               
[611] "Saperavi-Merlot"                    
[612] "Pinot Blanc-Viognier"               
[613] "Teroldego Rotaliano"                
[614] "Biancu Gentile"                     
[615] "Garnacha-Tempranillo"               
[616] "Xinisteri"                          
[617] "Sauvignon Blanc-Sauvignon Gris"     
[618] "Trebbiano di Lugana"                
[619] "Albarossa"                          
[620] "Ryzlink Rýnský"                     
[621] "Verdeca"                            
[622] "Cabernet Sauvignon Grenache"        
[623] "Tămâioasă Românească"               
[624] "Black Monukka"                      
[625] "Merlot-Grenache"                    
[626] "Vranac"                             
[627] "Tempranillo-Syrah"                  
[628] "Chardonel"                          
[629] "Silvaner-Traminer"                  
[630] "Uvalino"                            
[631] "Merseguera-Sauvignon Blanc"         
[632] "Cabernet-Malbec"                    
[633] "Boğazkere"                          
[634] "Gelber Traminer"                    
[635] "Vermentino Nero"                    
[636] "Cayuga"                             
[637] "Tinta Amarela"                      
[638] "Tinta Negra Mole"                   
[639] "Moscato Rosa"                       
[640] "Chelois"                            
[641] "Sauvignon Blanc-Assyrtiko"          
[642] NA                                   
[643] "Muscadel"                           
[644] "Shiraz-Tempranillo"                 
[645] "Roussanne-Grenache Blanc"           
[646] "Biancale"                           
[647] "Ansonica"                           
[648] "Syrah-Bonarda"                      
[649] "Durif"                              
[650] "Franconia"                          
[651] "Malbec-Tempranillo"                 
[652] "Nasco"                              
[653] "Monastrell-Petit Verdot"            
[654] "Sirica"                             
[655] "Vital"                              
[656] "Espadeiro"                          
[657] "Apple"                              
[658] "Pinot Grigio-Sauvignon Blanc"       
[659] "Blatina"                            
[660] "Karalahna"                          
[661] "Feteasca"                           
[662] "Sercial"                            
[663] "Valvin Muscat"                      
[664] "Malvasia Fina"                      
[665] "Roditis-Moschofilero"               
[666] "St. Vincent"                        
[667] "Chancellor"                         
[668] "Premsal"                            
[669] "Jampal"                             
[670] "Tokay Pinot Gris"                   
[671] "Colorino"                           
[672] "Picapoll"                           
[673] "Blauburger"                         
[674] "Tinta Madeira"                      
[675] "Centesimino"                        
[676] "Grenache Gris"                      
[677] "Trajadura"                          
[678] "Merlot-Petite Verdot"               
[679] "Ramisco"                            
[680] "Catalanesca"                        
[681] "Garnacha-Cabernet"                  
[682] "Garnacha-Cariñena"                  
[683] "Gamza"                              
[684] "Cabernet Franc-Lemberger"           
[685] "Chardonnay-Albariño"                
[686] "Shiraz-Mourvèdre"                   
[687] "Mavrokalavryta"                     
[688] "Favorita"                           
[689] "Babosa Negro"                       
[690] "Tintilia"                           
[691] "Dafni"                              
[692] "Petit Courbu"                       
[693] "Kotsifali"                          
[694] "Parraleta"                          
[695] "Moscato di Noto"                    
[696] "Roscetto"                           
[697] "Torontel"                           
[698] "Otskhanuri Sapere"                  
[699] "Viognier-Valdiguié"                 
[700] "Trollinger"                         
[701] "Tsapournakos"                       
[702] "Francisa"                           
[703] "Kuntra"                             
[704] "Pignolo"                            
[705] "Caprettone"                         
[706] "Ondenc"                             
[707] "Athiri"                             
[708] "Bobal-Cabernet Sauvignon"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>wine_ratings <span class="sc">|&gt;</span> <span class="fu">filter</span>(variety <span class="sc">==</span> <span class="st">"Cabernet Sauvignon"</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Pinot Noir"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Merlot"</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Chardonay"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Sauvignon Blanc"</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Pinot Gris"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Reisling"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Reisling"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Red Blend"</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"White Blend"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Malbec"</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Rosé"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Moscato"</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Prosecco"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Tempranillo"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Syrah"</span> <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Shiraz"</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                       <span class="sc">|</span> variety <span class="sc">==</span> <span class="st">"Zinfandel"</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(variety) <span class="sc">|&gt;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(variety)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "White Blend"        "Pinot Gris"         "Pinot Noir"        
 [4] "Cabernet Sauvignon" "Malbec"             "Red Blend"         
 [7] "Merlot"             "Sauvignon Blanc"    "Rosé"              
[10] "Zinfandel"          "Syrah"              "Shiraz"            
[13] "Moscato"            "Prosecco"           "Tempranillo"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>wine_ratings <span class="sc">|&gt;</span> <span class="fu">filter</span>(variety <span class="sc">==</span> <span class="st">"Zinfandel"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,714 × 14
    ...1 country description designation points price province region_1 region_2
   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   
 1    84 US      A healthy … Classic         86    24 Califor… Napa Va… Napa    
 2   108 US      Lots of sp… J.D. Hurley     87    26 Califor… Santa C… Central…
 3   122 US      Defines Ro… Rockpile C…     92    39 Califor… Rockpile Sonoma  
 4   207 US      Juicy and … Home Ranch…     90    32 Califor… Dry Cre… Sonoma  
 5   252 US      Shows the … Seity           85    35 Califor… Amador … Sierra …
 6   276 US      A huge, ki… Old Vines       89    20 Califor… Sonoma … Sonoma  
 7   305 US      Muted at f… &lt;NA&gt;            87    24 Califor… Mendoci… &lt;NA&gt;    
 8   329 US      With a fru… Reserve         86    34 Califor… Mendoci… &lt;NA&gt;    
 9   341 US      Plummy and… Serracino …     82    48 Califor… Dry Cre… Sonoma  
10   396 US      Rich in sp… Ancient Vi…     85    16 Califor… Califor… Califor…
# ℹ 2,704 more rows
# ℹ 5 more variables: taster_name &lt;chr&gt;, taster_twitter_handle &lt;chr&gt;,
#   title &lt;chr&gt;, variety &lt;chr&gt;, winery &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Of the 707 varieties in the data set I have collected 17 of the most popular grape varieties, leaving me with almost 60,000 observations.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#ui &lt;- fluidPage(</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  sidebarLayout(</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a> <span class="co">#   sidebarPanel(</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#    selectInput("country_sel", label = "Choose a Country", </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>   <span class="co">#               choices = country_sel),</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  radioButtons("white_or_red", label = "Red or White",</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>     <span class="co">#             choices = c("Red", "White")),</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>      <span class="co">#selectInput("grape_sel", label = "Choose a Grape",</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>       <span class="co">#           choices = grape_sel)</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  ),</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>   <span class="co"># mainPanel()</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#  )</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#)</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#server &lt;- function(input, output, session) {</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">#shinyApp(ui, server)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>